!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).WkValidator=n()}(this,function(){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(n,e){var t,r=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)),r}function i(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach(function(e){var n,t;n=r,e=a[t=e],t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function f(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var o={regular:{handler:"regular",message:"不符合此验证规则"},required:{handler:"required",message:"此字段必填"},min:{handler:"checkMin",message:"请输入大于$n的数字"},max:{handler:"checkMax",message:"请输入小于$n的数字"},isEmpty:{handler:"isEmpty",message:"不能输入任何值"},notEmpty:{handler:"isNotEmpty",message:"不存在"},length:{handler:"checkLength",message:"请输入$n个字符"},minLength:{handler:"checkMinLength",message:"最少要输入$n个字符"},maxLength:{handler:"checkMaxLength",message:"最多只能输入$n个字符"},contains:{handler:"isContains",message:"必须包含$s"},notContains:{handler:"notContains",message:"不能包含$s"},number:{handler:"isNumber",message:"请输入数字"},string:{handler:"isString",message:"请输入字符串"},array:{handler:"isArray",message:"请输入数组"},json:{handler:"isJson",message:"请输入json对象"},isInstance:{handler:"isInstance",message:"请输入$s类型数据"},idcard:{handler:"isIDCard",message:"请输入有效的身份证"},email:{handler:"isEmail",message:"请输入有效的电子邮件地址"},url:{handler:"isUrl",message:"请输入有效的网址"},tel:{handler:"isTel",message:"请输入座机号"},mobile:{handler:"isMobile",message:"请输入有效的手机号码"},digits:{handler:"isDigits",message:"请输入正整数"},integer:{handler:"isInteger",message:"只能输入整数数字"},chinese:{handler:"isChinese",message:"只能输入汉字"},ipv4:{handler:"isIPV4",message:"不是有效的IPV4地址"},ipv6:{handler:"isIPV6",message:"不是有效的IPV6地址"},date:{handler:"isDate",message:"请输入有效的日期"},equalTo:{handler:"isEqualTo",message:"两次输入不一致"},notEqualTo:{handler:"isNotEqualTo",message:"两次输入不能一致"}};function u(e){if(!e)return[];var e=e.split("|"),t=[];return e.map(function(e){var n=e.split("--"),e=String(n[0]).trim();o.hasOwnProperty(e)&&(e=o[e],t.push({method:e.handler,params:n.slice(1).map(function(e){e=String(e).trim();return isNaN(e)?e:Number(e)}),message:e.message}))}),t}function t(e){return Object.prototype.toString.call(e)}function c(e){return"[object Number]"===t(e)}function l(e){return"[object RegExp]"===t(e)}function d(n){try{return Array.isArray(n)}catch(e){return"[object Array]"===t(n)}}function h(e){return null==e||("[object Object]"===t(e)?!Object.keys(e).length:d(e)?!e.length:m(e)?!e:!e.toString().length)}var m=function(e){return"[object String]"===t(e)};function g(e,t){if(!e.length)return[];var r=[];return e.forEach(function(e){var n;r.push(i(i({},e),{},{value:t[e.key]||null,mths:(e=e.mths,n=t,e.map(function(e){return i(i({},e),{},{params:e.params.map(function(e){return m(e)&&0===e.indexOf("$")?n[e.substring(1)]:e})})}))}))}),r}var p={isEmail:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,isMobile:/^1[3456789]\d{9}$/,isTel:/^(\d{3,4}-)?\d{7,8}$/,isUrl:/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,isIDCard:/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,isDigits:/^\d+$/,isInteger:/^-?\d+$/,isChinese:/^[\u4e00-\u9fa5]+$/,isIPV4:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,isIPV6:/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i},b={isArray:d,isJson:function(e){return"object"===s(e)&&"[object Object]"===t(e)&&!e.length},isString:m,isInstance:function(e,n){return function(e){e=t(e);return e.substring(8,e.length-1).toLocaleLowerCase()}(e)===String(n).toLocaleLowerCase()},isNumber:c,isEmpty:h,isNotEmpty:function(e){return!h(e)},required:function(e){return!!e},regular:function(e,n){return!!l(n)&&n.test(e)},checkLength:function(e,n){return!h(e)&&e.length===n},checkMinLength:function(e,n){return!h(e)&&e.length>=n},checkMaxLength:function(e,n){return!h(e)&&e.length<=n},checkMin:function(e,n){return!!c(e)&&n<=e},checkMax:function(e,n){return!!c(e)&&e<=n},isContains:function(e,n){return!!m(e)&&-1!==e.indexOf(n)},notContains:function(e,n){return!!m(e)&&-1===e.indexOf(n)},isDate:function(e){return!/Invalid|NaN/.test(new Date(e).toString())},isEqualTo:function(e,n){return e===n},isNotEqualTo:function(e,n){return e!==n}};function y(e,n){for(var t=e.mths,r=e.key,a=e.value,i=0,s=t.length;i<s;i++){var o=t[i],u=o.method,c=o.params;o.message;if(!b[u].apply(null,[a].concat(f(c)))){c=function(e,n){var t=e.params,r=e.message,e=e.customerTips;if(e)return e;t=t.join(","),t=r.replace(/\$n|\$s/,t);return"字段[".concat(n,"]").concat(t)}(t[i],r);return void(n&&n(c))}}return 1}Object.keys(p).forEach(function(n){l(p[n])&&(b[n]=function(e){return p[n].test(e)})});var v="undefined"!=typeof wx&&wx.showToast,A="undefined"!=typeof window;function j(e){var n,t,r;v?wx.showToast({title:e,icon:"none"}):A?(n=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"div",n=document.createElement(n||"div");n.style.cssText="\n    position: fixed;\n    z-index: 999;\n    bottom: 30px;\n    left: 50%;\n    transform: translateX(-50%);\n    padding: 8px 16px;\n    background: rgba(0, 0, 0, 0.86);\n    color: #fff;\n    font-size: 12px;\n    line-height: 1;\n    border-radius: 4px;\n    letter-spacing: 0.1em;\n  ";e=document.createTextNode(e);return n.appendChild(e),n}(e),t=n,r=null,document.body.appendChild(t),clearTimeout(r),r=setTimeout(function(){document.body.removeChild(t),clearTimeout(r),r=null},2e3)):console.log(e)}return function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._ruleList=[],this._toast=j}var n,t,r;return n=e,(t=[{key:"rules",value:function(n,e){var t=this,r=1<arguments.length&&void 0!==e?e:{},e=Object.keys(n);if(e.length)return this._ruleList=[],e.map(function(e){!n[e]&&"number"!=typeof n[e]||t._ruleList.push({key:e,mths:function(r,a){if("string"==typeof r)return u(r);var i=[];return Object.keys(r).map(function(e){var n,t=r[e];o.hasOwnProperty(e)&&(n=o[e],i.push({method:n.handler,params:["number","string"].includes(s(t))?[t]:[],message:n.message,customerTips:a[e]||""}))}),i}(n[e],r[e]||{})||[]})}),this}},{key:"check",value:function(e){this._ruleList=g(this._ruleList,e);for(var n=0,t=this._ruleList.length;n<t;n++){if(!y(this._ruleList[n],this._toast))return!1}return!0}},{key:"validator",value:function(){var e=Array.prototype.slice.call(arguments);if(!e.length)return!1;var n=(o[e[0]]||"").handler;return!b[n]||b[n].apply(null,e.slice(1))}},{key:"setToast",value:function(e){return this._toast=e,this}}])&&a(n.prototype,t),r&&a(n,r),e}()});
